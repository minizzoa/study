<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Professional Multi-Calculator</title>
    <style>
        :root {
            --bg-color: #121212;
            --calc-bg: #1e1e1e;
            --btn-num: #333333;
            --btn-op: #fca311;
            --btn-func: #ef476f;
            --btn-sci: #4cc9f0;
            --lcd-color: #00ffcc;
        }

        body {
            background-color: var(--bg-color);
            display: flex;
            flex-direction: column;
            align-items: center;
            min-height: 100vh;
            margin: 0;
            padding: 5px;
            font-family: 'Pretendard', sans-serif;
            box-sizing: border-box;
        }

        .main-title { font-size: 1.3rem; font-weight: 800; color: #fff; margin: 5px 0; }

        .tabs {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 4px;
            margin-bottom: 8px;
            width: 100%;
            max-width: 360px;
        }
        .tab-btn {
            padding: 8px 0;
            border: none;
            border-radius: 8px;
            background: #2a2a2a;
            color: #aaa;
            cursor: pointer;
            font-size: 14px;
            font-weight: 800;
        }
        .tab-btn.active { background: var(--btn-op); color: #000; }

        .calculator-container {
            background: var(--calc-bg);
            padding: 12px;
            border-radius: 20px;
            width: 100%;
            max-width: 360px;
            box-sizing: border-box;
            border: 1px solid #333;
        }

        .display {
            width: 100%;
            height: 55px;
            background: #000;
            border-radius: 10px;
            text-align: right;
            padding: 8px 15px;
            font-size: 26px;
            color: var(--lcd-color);
            box-sizing: border-box;
            border: 1px solid #222;
            margin-bottom: 8px;
        }

        .expandable-section {
            display: grid;
            grid-template-rows: 0fr;
            transition: grid-template-rows 0.25s ease-out;
            overflow: hidden;
        }
        .expandable-section.active { grid-template-rows: 1fr; margin-bottom: 8px; }

        .box-ui {
            background: #111;
            padding: 8px;
            border-radius: 10px;
            display: flex;
            flex-direction: column;
            gap: 6px;
        }
        .row-ui { display: flex; align-items: center; gap: 5px; }
        
        select {
            flex: 1; height: 34px; background: #2a2a2a; color: #fff;
            border: none; padding: 0 5px; border-radius: 5px; font-size: 12px;
            outline: none;
        }
        
        .swap-btn {
            width: 30px; height: 30px; background: #444; color: #fff;
            border: none; border-radius: 50%; cursor: pointer; font-size: 16px;
            display: flex; align-items: center; justify-content: center;
            flex-shrink: 0;
        }

        .res-ui {
            flex: 1; background: #333; color: var(--btn-op); height: 34px;
            display: flex; align-items: center; justify-content: center;
            border-radius: 5px; font-size: 12px; font-weight: bold;
        }

        .grid { display: grid; grid-template-columns: repeat(4, 1fr); gap: 6px; }
        button {
            height: 48px;
            border: none; border-radius: 10px;
            font-size: 20px; font-weight: 700; cursor: pointer;
            background: var(--btn-num); color: #fff;
        }
        button:active { transform: scale(0.96); }
        .op { background: var(--btn-op); color: #000; }
        .func { background: var(--btn-func); font-size: 14px; }
        .sci { background: var(--btn-sci); color: #000; font-size: 12px; height: 36px; }

        .info-bar { font-size: 10px; color: #777; text-align: center; margin-top: 4px; }
    </style>
</head>
<body>

    <h1 class="main-title">üî¢ Î©ÄÌã∞Í≥ÑÏÇ∞Í∏∞</h1>

    <div class="tabs">
        <button class="tab-btn active" onclick="setMode('standard', this)">ÏùºÎ∞ò</button>
        <button class="tab-btn" onclick="setMode('scientific', this)">Í≥µÌïô</button>
        <button class="tab-btn" onclick="setMode('currency', this)">ÌôòÏú®</button>
        <button class="tab-btn" onclick="setMode('unit', this)">Îã®ÏúÑ</button>
    </div>

    <div class="calculator-container">
        <input type="text" id="screen" class="display" value="0" readonly>

        <div id="sci-container" class="expandable-section">
            <div style="min-height: 0;">
                <div class="grid" style="grid-template-rows: repeat(2, 1fr); margin-bottom: 6px;">
                    <button class="sci" onclick="input('Math.sin(')">sin</button>
                    <button class="sci" onclick="input('Math.cos(')">cos</button>
                    <button class="sci" onclick="input('Math.tan(')">tan</button>
                    <button class="sci" onclick="input('Math.PI')">œÄ</button>
                    <button class="sci" onclick="input('Math.sqrt(')">‚àö</button>
                    <button class="sci" onclick="input('Math.log10(')">log</button>
                    <button class="sci" onclick="input('Math.log(')">ln</button>
                    <button class="sci" onclick="input('**')">x ∏</button>
                </div>
            </div>
        </div>

        <div id="cur-container" class="expandable-section">
            <div style="min-height: 0;">
                <div class="box-ui">
                    <div class="row-ui">
                        <select id="fromCurr" onchange="convertCurrency()"></select>
                        <button class="swap-btn" onclick="swapCurrency()">‚áÑ</button>
                        <select id="toCurr" onchange="convertCurrency()"></select>
                    </div>
                    <div class="row-ui">
                        <div class="res-ui" id="currInputLabel">0 USD</div>
                        <div class="res-ui" id="currResultLabel">Í≤∞Í≥º</div>
                    </div>
                    <div id="curInfoBar" class="info-bar">Ïã§ÏãúÍ∞Ñ ÌôòÏú® Ï†ïÎ≥¥Î•º Í∞ÄÏ†∏Ïò§Îäî Ï§ë...</div>
                </div>
            </div>
        </div>

        <div id="unit-container" class="expandable-section">
            <div style="min-height: 0;">
                <div class="box-ui">
                    <div class="row-ui">
                        <select id="unitType" onchange="updateUnitOptions()">
                            <option value="length">Í∏∏Ïù¥</option><option value="weight">Î¨¥Í≤å</option>
                            <option value="area">Î©¥Ï†Å</option><option value="speed">ÏÜçÎèÑ</option>
                            <option value="volume">Î∂ÄÌîº</option><option value="temp">Ïò®ÎèÑ</option>
                        </select>
                    </div>
                    <div class="row-ui">
                        <select id="fromUnit" onchange="convertUnit()"></select>
                        <button class="swap-btn" onclick="swapUnit()">‚áÑ</button>
                        <select id="toUnit" onchange="convertUnit()"></select>
                    </div>
                    <div class="res-ui" id="unitResultLabel" style="width:100%">Î≥ÄÌôò Í≤∞Í≥º</div>
                </div>
            </div>
        </div>

        <div class="grid">
            <button class="func" onclick="clearAll()">AC</button>
            <button class="func" onclick="del()">DEL</button>
            <button class="op" onclick="input('(')">(</button><button class="op" onclick="input(')')">)</button>
            <button onclick="input('7')">7</button><button onclick="input('8')">8</button><button onclick="input('9')">9</button>
            <button class="op" onclick="input('/')">√∑</button>
            <button onclick="input('4')">4</button><button onclick="input('5')">5</button><button onclick="input('6')">6</button>
            <button class="op" onclick="input('*')">√ó</button>
            <button onclick="input('1')">1</button><button onclick="input('2')">2</button><button onclick="input('3')">3</button>
            <button class="op" onclick="input('-')">-</button>
            <button style="grid-column: span 2;" onclick="input('0')">0</button><button onclick="input('.')">.</button>
            <button class="op" onclick="input('+')">+</button>
            <button class="op" style="grid-column: span 4; background:#fff; color:#000; height: 44px; margin-top: 2px;" onclick="exe()">=</button>
        </div>
    </div>

    <script>
        const screen = document.getElementById('screen');
        let currentMode = 'standard';

        // Íµ≠Í∞ÄÎ™Ö Î¶¨Ïä§Ìä∏ (Ïù¥Î™®ÏßÄ Ï†úÏô∏)
        const countryData = [
            {code: "KRW", name: "ÎåÄÌïúÎØºÍµ≠ Ïõê"}, {code: "USD", name: "ÎØ∏Íµ≠ Îã¨Îü¨"},
            {code: "JPY", name: "ÏùºÎ≥∏ Ïóî"}, {code: "EUR", name: "Ïú†ÎüΩ Ïú†Î°ú"},
            {code: "CNY", name: "Ï§ëÍµ≠ ÏúÑÏïà"}, {code: "GBP", name: "ÏòÅÍµ≠ ÌååÏö¥Îìú"},
            {code: "AUD", name: "Ìò∏Ï£º Îã¨Îü¨"}, {code: "CAD", name: "Ï∫êÎÇòÎã§ Îã¨Îü¨"},
            {code: "CHF", name: "Ïä§ÏúÑÏä§ ÌîÑÎûë"}, {code: "HKD", name: "ÌôçÏΩ© Îã¨Îü¨"},
            {code: "SGD", name: "Ïã±Í∞ÄÌè¨Î•¥ Îã¨Îü¨"}, {code: "TWD", name: "ÎåÄÎßå Îã¨Îü¨"},
            {code: "THB", name: "ÌÉúÍµ≠ Î∞îÌä∏"}, {code: "VND", name: "Î≤†Ìä∏ÎÇ® Îèô"},
            {code: "PHP", name: "ÌïÑÎ¶¨ÌïÄ ÌéòÏÜå"}, {code: "MYR", name: "ÎßêÎ†àÏù¥ÏãúÏïÑ ÎßÅÍπÉ"},
            {code: "IDR", name: "Ïù∏ÎèÑÎÑ§ÏãúÏïÑ Î£®ÌîºÏïÑ"}, {code: "INR", name: "Ïù∏ÎèÑ Î£®Ìîº"},
            {code: "SAR", name: "ÏÇ¨Ïö∞Îîî Î¶¨ÏñÑ"}, {code: "AED", name: "ÏïÑÎûçÏóêÎØ∏Î¶¨Ìä∏ ÎîîÎ•¥Ìï®"},
            {code: "MXN", name: "Î©ïÏãúÏΩî ÌéòÏÜå"}, {code: "BRL", name: "Î∏åÎùºÏßà Ìó§Ïïå"}
        ];

        const units = {
            length: { m: 1, km: 1000, cm: 0.01, mm: 0.001, inch: 0.0254, ft: 0.3048 },
            weight: { kg: 1, g: 0.001, lb: 0.453592, oz: 0.0283495 },
            area: { m2: 1, km2: 1000000, pyeong: 3.305785, ac: 4046.86 },
            speed: { "m/s": 1, "km/h": 0.277778, mph: 0.44704 },
            volume: { L: 1, ml: 0.001, gal: 3.78541 },
            temp: { C: "C", F: "F" }
        };

        function initCurrency() {
            const f = document.getElementById('fromCurr'), t = document.getElementById('toCurr');
            if (f.options.length > 0) return;
            countryData.forEach(c => {
                f.add(new Option(`${c.name} (${c.code})`, c.code));
                t.add(new Option(`${c.name} (${c.code})`, c.code));
            });
            f.value = "USD"; t.value = "KRW";
        }

        function swapCurrency() {
            const f = document.getElementById('fromCurr'), t = document.getElementById('toCurr');
            const tmp = f.value; f.value = t.value; t.value = tmp;
            convertCurrency();
        }

        function swapUnit() {
            const f = document.getElementById('fromUnit'), t = document.getElementById('toUnit');
            const tmp = f.value; f.value = t.value; t.value = tmp;
            convertUnit();
        }

        function setMode(m, btn) {
            currentMode = m;
            document.querySelectorAll('.tab-btn').forEach(b => b.classList.remove('active'));
            btn.classList.add('active');
            document.getElementById('sci-container').classList.toggle('active', m === 'scientific');
            document.getElementById('cur-container').classList.toggle('active', m === 'currency');
            document.getElementById('unit-container').classList.toggle('active', m === 'unit');
            if(m === 'unit') updateUnitOptions();
            if(m === 'currency') initCurrency();
            clearAll();
        }

        function input(v) { (screen.value === "0" && v !== '.') ? screen.value = v : screen.value += v; updateRealtime(); }
        function updateRealtime() { if(currentMode === 'currency') convertCurrency(); if(currentMode === 'unit') convertUnit(); }
        function clearAll() { screen.value = "0"; updateRealtime(); }
        function del() { screen.value = screen.value.slice(0, -1) || "0"; updateRealtime(); }

        function exe() {
            try {
                let expression = screen.value.replace(/√ó/g, '*').replace(/√∑/g, '/');
                let res = eval(expression);
                screen.value = Number.isInteger(res) ? res : res.toFixed(3);
                updateRealtime();
            } catch { screen.value = "Error"; }
        }

        function updateUnitOptions() {
            const type = document.getElementById('unitType').value;
            const fS = document.getElementById('fromUnit'), tS = document.getElementById('toUnit');
            fS.innerHTML = tS.innerHTML = '';
            Object.keys(units[type]).forEach(u => { fS.add(new Option(u, u)); tS.add(new Option(u, u)); });
            convertUnit();
        }

        function convertUnit() {
            const type = document.getElementById('unitType').value, from = document.getElementById('fromUnit').value, to = document.getElementById('toUnit').value, val = parseFloat(screen.value) || 0;
            let res;
            if (type === 'temp') {
                if (from === to) res = val;
                else if (from === 'C' && to === 'F') res = (val * 9/5) + 32;
                else if (from === 'F' && to === 'C') res = (val - 32) * 5/9;
            } else { res = (val * units[type][from]) / units[type][to]; }
            document.getElementById('unitResultLabel').innerText = `${val}${from} = ${res.toLocaleString(undefined,{maximumFractionDigits:2})}${to}`;
        }

        async function convertCurrency() {
            const from = document.getElementById('fromCurr').value, to = document.getElementById('toCurr').value, val = parseFloat(screen.value) || 0;
            try {
                const res = await fetch(`https://open.er-api.com/v6/latest/${from}`);
                const data = await res.json();
                const rate = data.rates[to];
                document.getElementById('currResultLabel').innerText = (val * rate).toLocaleString(undefined, {maximumFractionDigits:2}) + " " + to;
                document.getElementById('currInputLabel').innerText = val.toLocaleString() + " " + from;
                document.getElementById('curInfoBar').innerText = `1 ${from} = ${rate.toFixed(2)} ${to}`;
            } catch (e) {
                document.getElementById('curInfoBar').innerText = "ÌôòÏú® Ï†ïÎ≥¥Î•º Î∂àÎü¨Ïò¨ Ïàò ÏóÜÏäµÎãàÎã§.";
            }
        }
    </script>
</body>
</html>