<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Neon Number Picker - Universal Edition</title>
    <style>
        :root {
            --neon-mint: #2effc3;
            --dark-bg: #0a0a0a;
            --card-bg: #161616;
            --text-gray: #b0b0b0;
            --neon-glow: 0 0 10px rgba(46, 255, 195, 0.4), 0 0 20px rgba(46, 255, 195, 0.2);
            --neon-glow-strong: 0 0 15px rgba(46, 255, 195, 0.6), 0 0 30px rgba(46, 255, 195, 0.3);
        }

        body {
            font-family: 'Pretendard', -apple-system, BlinkMacSystemFont, system-ui, Roboto, sans-serif;
            background-color: var(--dark-bg);
            color: white;
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            margin: 0;
            padding: 15px; /* 모바일 여백 */
            box-sizing: border-box;
        }

        .container {
            background-color: var(--card-bg);
            padding: 40px 25px;
            border-radius: 24px;
            border: 1px solid #333;
            box-shadow: 0 20px 50px rgba(0,0,0,0.5);
            width: 100%;
            max-width: 420px; /* PC에서의 최대 폭 */
            text-align: center;
            position: relative;
            animation: fadeIn 0.8s ease-out;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        /* 소리 스위치 */
        .sound-control {
            position: absolute;
            top: 15px;
            right: 20px;
            display: flex;
            align-items: center;
            gap: 8px;
            font-size: 0.75rem;
            color: var(--text-gray);
            cursor: pointer;
            z-index: 10;
        }

        .sound-control input { display: none; }
        .slider {
            width: 32px;
            height: 16px;
            background-color: #333;
            border-radius: 20px;
            position: relative;
            transition: 0.3s;
            border: 1px solid #444;
        }
        .slider:before {
            content: "";
            position: absolute;
            width: 10px;
            height: 10px;
            left: 2px;
            bottom: 2px;
            background-color: white;
            border-radius: 50%;
            transition: 0.3s;
        }
        input:checked + .slider {
            background-color: var(--neon-mint);
            box-shadow: 0 0 10px var(--neon-mint);
        }
        input:checked + .slider:before {
            transform: translateX(16px);
            background-color: #000;
        }

        h1 {
            margin-top: 15px;
            margin-bottom: 30px;
            color: var(--neon-mint);
            font-size: clamp(1.5rem, 8vw, 2.2rem); /* 가변 폰트 */
            text-shadow: var(--neon-glow);
            letter-spacing: -1px;
            font-weight: 800;
        }

        .input-group {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 12px;
            margin-bottom: 30px;
            font-size: 1.1rem;
            color: var(--text-gray);
        }

        input[type="number"] {
            width: 90px;
            padding: 10px;
            background-color: #0d0d0d;
            border: 1px solid #444;
            border-radius: 12px;
            color: var(--neon-mint);
            font-size: 1.8rem;
            font-weight: 800;
            text-align: center;
            outline: none;
            transition: border-color 0.3s;
        }
        input[type="number"]:focus {
            border-color: var(--neon-mint);
        }

        .buttons {
            display: flex;
            gap: 12px;
            margin-bottom: 10px;
        }

        button {
            flex: 1;
            padding: 16px;
            border: none;
            border-radius: 14px;
            font-size: 1rem;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.2s cubic-bezier(0.4, 0, 0.2, 1);
            -webkit-tap-highlight-color: transparent;
        }

        #drawBtn {
            background-color: var(--neon-mint);
            color: #000;
            box-shadow: var(--neon-glow);
            flex: 2; /* 시작 버튼을 더 크게 */
        }

        #drawBtn:hover:not(:disabled) {
            transform: translateY(-2px);
            box-shadow: var(--neon-glow-strong);
        }

        #drawBtn:active:not(:disabled) {
            transform: scale(0.98);
        }

        #resetBtn { background-color: #252525; color: #777; }
        #resetBtn:hover { color: #aaa; background-color: #333; }

        #resultArea {
            display: none;
            margin-top: 25px;
            padding: 30px 15px;
            border-radius: 20px;
            background: linear-gradient(145deg, #1d1d1d, #111);
            border: 1px solid rgba(46, 255, 195, 0.3);
            box-shadow: var(--neon-glow);
            position: relative;
            overflow: hidden;
        }

        #resultArea.show { display: block; animation: popIn 0.5s cubic-bezier(0.175, 0.885, 0.32, 1.275); }
        
        #winnerContent { 
            font-size: clamp(3.5rem, 15vw, 5.5rem); /* 모바일에서도 안 깨지게 */
            font-weight: 900; 
            line-height: 1;
            margin: 10px 0;
            color: white;
            text-shadow: 0 0 20px rgba(255,255,255,0.2);
        }

        @keyframes popIn {
            0% { opacity: 0; transform: translateY(15px) scale(0.95); }
            100% { opacity: 1; transform: translateY(0) scale(1); }
        }

        /* 크롬 숫자기 화살표 제거 */
        input::-webkit-outer-spin-button,
        input::-webkit-inner-spin-button { -webkit-appearance: none; margin: 0; }
    </style>
</head>
<body>

<div class="container">
    <label class="sound-control">
        <span>SOUND</span>
        <input type="checkbox" id="soundToggle" checked>
        <div class="slider"></div>
    </label>

    <h1>NEON PICKER</h1>
    
    <div class="input-group">
        <span style="font-weight: 500;">TOTAL</span>
        <input type="number" id="totalCount" value="30" min="2" inputmode="numeric">
        <span style="font-weight: 500;">명</span>
    </div>

    <div class="buttons">
        <button id="drawBtn">추첨 시작</button>
        <button id="resetBtn">리셋</button>
    </div>

    <div id="resultArea">
        <div id="resultLabel" style="color:var(--neon-mint); font-size: 0.9rem; letter-spacing:1.5px; margin-bottom:10px; font-weight: 600; text-transform: uppercase;">Ready...</div>
        <div id="winnerContent">0</div>
    </div>
</div>

<script>
    const audioCtx = new (window.AudioContext || window.webkitAudioContext)();
    const soundToggle = document.getElementById('soundToggle');

    function playSound(freq, type, duration, volume = 0.08) {
        if (!soundToggle.checked) return;
        const osc = audioCtx.createOscillator();
        const gain = audioCtx.createGain();
        osc.type = type;
        osc.frequency.setValueAtTime(freq, audioCtx.currentTime);
        gain.gain.setValueAtTime(volume, audioCtx.currentTime);
        gain.gain.exponentialRampToValueAtTime(0.01, audioCtx.currentTime + duration);
        osc.connect(gain);
        gain.connect(audioCtx.destination);
        osc.start();
        osc.stop(audioCtx.currentTime + duration);
    }

    const drawBtn = document.getElementById('drawBtn');
    const resetBtn = document.getElementById('resetBtn');
    const resultArea = document.getElementById('resultArea');
    const winnerContent = document.getElementById('winnerContent');
    const resultLabel = document.getElementById('resultLabel');
    let isAnimating = false;

    drawBtn.addEventListener('click', function() {
        if (isAnimating) return;
        const count = parseInt(document.getElementById('totalCount').value);
        if (isNaN(count) || count < 2) {
            alert("2명 이상의 숫자를 입력해주세요.");
            return;
        }

        if (audioCtx.state === 'suspended') audioCtx.resume();
        
        isAnimating = true;
        drawBtn.disabled = true;
        drawBtn.innerText = "...";
        resultLabel.innerText = "SHUFFLING...";
        resultArea.classList.add('show');

        let counter = 0;
        const shuffleCount = 40; // 조금 더 길게 변경
        
        const shuffleInterval = setInterval(() => {
            const randomNum = Math.floor(Math.random() * count) + 1;
            winnerContent.innerText = randomNum;
            
            // 점점 빨라지거나 고조되는 사운드
            playSound(250 + (counter * 12), 'sine', 0.08);
            
            counter++;
            if (counter >= shuffleCount) {
                clearInterval(shuffleInterval);
                const finalWinner = Math.floor(Math.random() * count) + 1;
                
                resultLabel.innerText = "WINNER IS";
                winnerContent.innerText = finalWinner;
                winnerContent.style.color = "var(--neon-mint)";
                winnerContent.style.textShadow = "var(--neon-glow)";
                
                // 축하 사운드
                setTimeout(() => {
                    playSound(523.25, 'triangle', 0.4, 0.1); // C5
                    playSound(659.25, 'triangle', 0.4, 0.1); // E5
                    playSound(783.99, 'triangle', 0.6, 0.1); // G5
                }, 50);
                
                drawBtn.disabled = false;
                drawBtn.innerText = "다시 추첨";
                isAnimating = false;
            }
        }, 60);
    });

    resetBtn.addEventListener('click', () => {
        if (isAnimating) return;
        resultArea.classList.remove('show');
        winnerContent.style.color = "white";
        winnerContent.style.textShadow = "none";
        drawBtn.innerText = "추첨 시작";
        document.getElementById('totalCount').value = 30;
    });
</script>
</body>
</html>